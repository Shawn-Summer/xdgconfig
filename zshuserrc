
# envir
#
export LC_SSH_IDENTITY=xxl #用于ssh验证身份

for file in $(find "$XDG_CONFIG_HOME/ultils" -type f -name "*.sh"); do
  source "$file"
done

export HOMEBREW_INSTALL_FROM_API=1
export HOMEBREW_API_DOMAIN="https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/api"
export HOMEBREW_BOTTLE_DOMAIN="https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles"
export HOMEBREW_BREW_GIT_REMOTE="https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/brew.git"
export HOMEBREW_CORE_GIT_REMOTE="https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-core.git"

# alias and function
alias ll="ls -lt"
alias la="ls -lAt"

# nvim
(( ${+commands[nvim]} )) && alias vim='nvim'
# tmux
alias tmx='tmux attach || tmux new'  # 连接最近会话，若无则新建
alias tls='tmux ls'
alias tat='tmux attach -t'
alias tst='tmux switch -t'
alias tnew='tmux new -s'
alias tre='tmux rename-session'
alias tconfig='vim ~/.tmux.conf'
alias tkall='tmux kill-server'
tkt() {
  # 遍历所有传入的参数（每个参数都是一个会话名/ID）
  for session in "$@"; do
    # 逐个删除会话，-t 指定会话， 静默模式（不输出成功信息）
    tmux kill-session -t "$session" 
  done
}

# conda env
if command -v mamba &> /dev/null; then
  alias conda='mamba'
fi
alias condals='conda env list'
alias condakt='conda env remove -n'
alias condaat='conda activate'
alias condade='conda deactivate'
alias condanew='conda create --name'
alias condaconfig='vim ~/.condarc'

# terminal config
alias kittyconfig='vim $XDG_CONFIG_HOME/kitty/kitty.conf'
alias alacrittyconfig='vim $XDG_CONFIG_HOME/alacritty/alacritty.toml'
alias ghosttyconfig='vim $XDG_CONFIG_HOME/ghostty/config'

alias zshconfig='vim ~/.zshrc'
alias zshrestart='source ~/.zshrc' 
alias vimconfig='vim $XDG_CONFIG_HOME/nvim/'
alias xdgconfig='vim $XDG_CONFIG_HOME/'
alias cl="clear"
alias icat="kitten icat"
## git 
alias pushanyway='git push origin HEAD --force'			#push anyway

alias setproxy='export http_proxy="http://127.0.0.1:7890" && export https_proxy="http://127.0.0.1:7890"'

# 检查系统是否安装 yazi（command -v 静默检查命令是否存在，返回 0 表示存在）
if command -v yazi &> /dev/null; then
    function y() {
        local tmp="$(mktemp -t "yazi-cwd.XXXXXX")" cwd
        yazi "$@" --cwd-file="$tmp"
        IFS= read -r -d '' cwd < "$tmp"
        [ -n "$cwd" ] && [ "$cwd" != "$PWD" ] && builtin cd -- "$cwd"
        rm -f -- "$tmp"
    }
fi
